(O8705 - SET WCS-QUICKSTART 4)
(260605 * BLUM QUICKSTART * KN_KM * CB)
(VERSION V4A-R004 * 01.10.2022)
(COPYRIGHT BLUM-NOVOTEST GMBH 2020)

#27=#1
#28=#2
#29=#3
#121=0
IF[#4016EQ69.]GOTO10
GOTO310
N10#9=1.
(IF[[PRM[1202,0]]NE1.]GOTO15)
(#9=-1.)
N15IF[#13EQ-1.]GOTO20
G65P8710
N20(****DEFAULT SETTING WCS****)
#1=5201  (OFFSET WCS)
#2=1  (OFFSET AXIS)
#3=20  (INTERVAL AXIS)
#4=7001 (-> 7001 OPTIONAL WCS P1..48 -> 14001 OPTIONAL WCS P1..300)
#5=5     (-> OPTIONAL FIXTURE OFFSET)
(TYPE KINEMATIK: A:1 B:2 C:4 AB:3 AC:5 BC:6)
N30(****BASE WCS****)
IF[#23GE1.0]GOTO40
IF[#23LE-1.0]GOTO40
GOTO250
N40IF[#23LT53.]GOTO50
IF[#23GT59.]GOTO260
#6=#1
#7=#23-53. 
GOTO90 
N50IF[#23GT-1.]GOTO80
IF[#4EQ14001]GOTO60
IF[#23LT-48.]GOTO270 
N60IF[#23LT-300.]GOTO270 
N70#6=#4 
#7=ABS[#23]-1. 
GOTO90 
N80IF[#23GT8.]GOTO280
GOTO360 (-> ROTARY FIXTURE OFFSET)
N90IF[#[#111+9]NE#0]GOTO140
#30=FIX[#120/100]
#31=[FIX[#120/10]-10*FIX[#120/100]]
#32=FIX[#120-FIX[#120/10]*10]
#14=#[5020+#30]-#[5040+#30]-[#[#1+#2*[#30-1.]]*#9]
#15=#[5020+#31]-#[5040+#31]-[#[#1+#2*[#31-1.]]*#9]
#16=#[5020+#32]-#[5040+#32]-[#[#1+#2*[#32-1.]]*#9]
IF[ABS[#23]NE53.]GOTO100
#14=[#[#1+#2*[#30-1.]]*#9]
#15=[#[#1+#2*[#31-1.]]*#9]
#16=[#[#1+#2*[#32-1.]]*#9]
N100IF[#[#111+3]EQ#0]GOTO110
#[#6+[#3*#7]+[#2*[#30-1.]]]=#14+#[#111+3]
N110IF[#[#111+4]EQ#0]GOTO120
#[#6+[#3*#7]+[#2*[#31-1.]]]=#15+#[#111+4]
N120IF[#[#111+5]EQ#0]GOTO130
#[#6+[#3*#7]+[#2*[#32-1.]]]=#16+#[#111+5]-[#122*[#129AND2]/2]
N130M[99]
N140M159
IF[ABS[#27]+ABS[#28]+ABS[#29]EQ0]GOTO180
#21=FIX[#130*0.1]
#18=0
#19=0
IF[#27EQ#0]GOTO160
#18=#27
#10=FIX[[#21-[FIX[#21]]]*1000.]
#19=FIX[#21/100.]
#20=[#27/ABS[#27]]
GOTO220
N160IF[#28EQ#0]GOTO170
#18=#28
#10=FIX[[#21-[FIX[#21]]]*1000.]
#19=[FIX[#21/10.]-10.*FIX[#21/100.]]
#20=[#28/ABS[#28]]
GOTO220
N170IF[#29EQ#0]GOTO180(***AXES TRANSFER C***)
#18=#29
#10=FIX[[#21-[FIX[#21]]]*1000.]
#19=FIX[#21-FIX[#21/10.]*10.]
#20=[#29/ABS[#29]]
GOTO220
N180#21=#130*0.1
#18=FIX[[#21-[FIX[#21]]]*10.]
#22=[[#130-[FIX[#130]]]*1000.]
#20=1.
IF[#18NE1.]GOTO190
#19=FIX[#21/100.]
IF[[[#22AND4]/4]EQ1.]GOTO220
#20=-1.
GOTO220
N190IF[#18NE2.]GOTO200
#19=[FIX[#21/10.]-10*FIX[#21/100.]]
IF[[[#22AND2]/2]EQ1.]GOTO220
#20=-1.
GOTO220
N200IF[#18NE3.]GOTO210(***AXES ROT CW/CCW***)
#19=FIX[#21-FIX[#21/10.]*10.]
IF[[[#22AND1]/1]EQ1.]GOTO220
#20=-1.
GOTO220
N210GOTO300
N220IF[#19NE0]GOTO230
GOTO300
N230#12=#[5020+#19]-#[5040+#19]-[#[#1+[#2*[#19-1.]]]*#9]
M159
IF[ABS[#23]NE53.]GOTO240 
#12=[#[#1+[#2*[#19-1.]]]*#9]
N240#[#1+[#2*[#19-1.]]+[#3*#7]]=#12-[#[#111+9]*#20]
M[99]
N250#121=101.05
GOTO320
N260#121=101.06
GOTO320
N270#121=101.07
GOTO320
N280#121=101.08
GOTO320
N290#121=101.09
GOTO320
N300#121=101.11
GOTO320
N310#121=101.12
N320 
IF[#13EQ-1.]GOTO330
G65P8711E#121
N330M[99]
N360#20=#4014
#[35500+#23*20.+0]=[#5-1.](#5: 0:NO 1:A 2:B 3:C 4:AB 5:AC 6:BC)
M159
IF[#[#111+3]EQ#0]GOTO370
#24=#[5220+[#20-54.]*20+1]           (G54: 5221...3 / X...Z)
#[35500+#23*20.+1]=[#[#111+3]+#5221]-#24 (RESULT+G54-AKT_WKS)
N370IF[#[#111+4]EQ#0]GOTO380
#25=#[5220+[#20.-54.]*20.+2](Y)
#[35500+#23*20.+2]=[#[#111+4]+#5222]-#25
N380IF[#[#111+5]EQ#0]GOTO390
#26=#[5220+[#20-54.]*20.+3](Z)
#[35500+#23*20.+3]=[#[#111+5]+#5223]-#26
N390IF[[[#5AND1]/1]EQ0]GOTO400 (A)
#[35500+#23*20.+4]=[#5025-#[5220+[#20-54.]*20+4.]] (A)
N400IF[[[#5AND2]/2]EQ0]GOTO410 (B)
#[35500+#23*20.+5]=[#5026-#[5220+[#20-54.]*20+5.]] (B)
N410IF[[[#5AND4]/4]EQ0]GOTO420 (C)
#[35500+#23*20.+6]=[#5027-#[5220+[#20-54.]*20+6.]] (C)
N420
M[99]

