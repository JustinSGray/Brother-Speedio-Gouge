(O8717 - TC-USER 1-QUICKSTART 4)
(260605 * BLUM QUICKSTART * KN_KM * CB)
(VERSION V4A-R004 * 01.10.2022)
(COPYRIGHT BLUM-NOVOTEST GMBH 2020)

IF[#13NE2.]GOTO30
(************************************)
N10(*** TC OFF ***)
(1--->)

(TC 1 OFF)
M481   (TC52 OFF)
M159
(1<---)
N20(*** USER END ***)
(2--->)

(2<---)
M[99]
(************************************)
N30(*** USER START ***)
(3--->)
#14=#4120
M159
IF[#14NE#0]GOTO40
#3000=111(WRONG_TOOL / MODAL T-CODE?)
(3<---)
N40(*** TC ON ***)
(4--->)
(TC 1 ON)
M480 (TC52 ON)
M159
(4<---)
(************************************)
N50(*** USER SETTING TC ***)

#1=99     (#4111/#4120  H/T-NUMBER READ OUT)
#2=730    (CALIBRATION START ADDRESS)
#3=1.0    (PROBESPHERERADIUS XY)
#4=1.0    (PROBESPHERERADIUS Z)
#5=5      (MEASURING DISTANCE XY)
#6=3      (MEASURING DISTANCE Z)

#7=1000   (FEEDRATE MEASURE 1. STROKE)
#8=0      (FEEDRATE MEASURE 2. STROKE)
#9=5000   (FEEDRATE POSITIONING)
#10=0     (FEEDRATE RETRACT 0:G00 / <>0: G01)
#16=11000 (TOOL LENGTH - BASE ADDRESS)
#17=13000 (TOOL RADIUS - BASE ADDRESS)
(*** OPTIONAL: ONLY PULSE SWITCH ON/OFF  ***)
#20=0     (OUTPUTADRESS SIGNAL MODE TC - ONLY PULSE)
#21=0     (OUTPUTADRESS SIGNAL START TC - ONLY PULSE)
(************************************)
N60(*** CHECK SETTING ***)
(#1=#4111 / H-NUMBER AUS #4111)
IF[#2LT500.]GOTO70
IF[#2GT999.]GOTO70
GOTO80
N70#121=113.02
GOTO210
N80IF[#3NE0.]GOTO90
#3=#[#17+#1]
#4=#3
N90#129=0
#11=1
WHILE[#11LE7.]DO1
#12=#11*0.01
IF[#[#11]EQ0.]GOTO200
#11=#11+1.
END1
IF[#9NE0.]GOTO100
#12=0.09
GOTO200
N100#15=1.+24.*FIX[[#4006/2]/FUP[#4006/2]]
#1=ABS[[ROUND[1000.*[#1]]]/1000.]
#3=ABS[[ROUND[1000.*[#3/#15]]]/1000.]
#4=ABS[[ROUND[1000.*[#4/#15]]]/1000.]
#5=ABS[[ROUND[1000.*[#5/#15]]]/1000.]
#6=ABS[[ROUND[1000.*[#6/#15]]]/1000.]
#7=FIX[ABS[ROUND[1000.*[#7/FIX[#15]]]]/1000.]
#8=FIX[ABS[ROUND[1000.*[#8/FIX[#15]]]]/1000.]
#9=FIX[ABS[ROUND[1000.*[#9/FIX[#15]]]]/1000.]
#10=FIX[ABS[ROUND[1000.*[#10/FIX[#15]]]]/1000.]
M159
#110=#2
#113=[#3*1000]+[#4*0.001]
#114=[#5*1000]+[#6*0.001]
#115=#7+[#8*0.00001]
#116=#9+[#10*0.00001]
#148=[#20]+[#21*0.0001]
N110IF[#4016EQ68.]GOTO120
#[#110+4]=0
#131=#[#110+0]
#132=#[#110+1]
#133=#[#110+2]
#134=#[#110+3]
GOTO150
N120#27=SQRT[#[#110+2]*#[#110+2]+#[#110+3]*#[#110+3]]
IF[ABS[#[#110+3]]GE0.0001]GOTO130
#28=0
GOTO140
N130
IF[[[#128AND32]/32]EQ1.]GOTO135
#28=ATAN[[#[#110+3]]/[#[#110+2]]]
GOTO140
N135#28=[ATAN[#[#110+3]]/[#[#110+2]]]
N140#133=COS[#[#110+4]+#28]*#27
#134=SIN[#[#110+4]+#28]*#27
#29=ROUND[#[#110+4]]
#131=[[90.-#29]/90.]*#[#110+0]+[#29/90.]*#[#110+1]
#132=[[90.-#29]/90.]*#[#110+1]+[#29/90.]*#[#110+0]
N150
#122=#[#16+#1]
#18=1.
#19=0
#129=1*[1.-#18*#19]+2.*#18*#19
N160(MANUAL SETTING TOOL LENGTH)
(#129:   1   WZL POSITION/SKIP)
(#129:   2   WZL SET WCS)
IF[[#18*#19]NE1.]GOTO170
G49
N170M159
#32=FIX[#120-FIX[#120/10.]*10.]
IF[#1GE1.]GOTO180
#121=113.01
GOTO210
N180IF[#4111EQ#1]GOTO190
IF[#4120EQ#1]GOTO190
#121=111.01
GOTO210
N190
G31G43H#1Z[#[5040+#32]-[#122]]F[1000./#15]
M159
M[99]
N200#121=113.0+#12
N210
G65P8710E#121
N220M[99]



